# SLACKBOT 
![picture](https://miro.medium.com/max/4000/1*AB7mUaMbKwZjThYXVIuenQ.jpeg)

## Описание
Приложение парсит сайт на появление новых постов и сохраняет в базе данных. Далее согласно заданным настройкам делает рассылку на каналы программы Slack.

Для запуска задач нужно создать Slack ботов. Slack ботов можно создавать сколько угодно. Каждый Slack бот будет прикреплен к определенной задаче и отправлять сообщение в выбранный канал в соответствии с выбранными настройками.  
Чтобы создать бота нажмите создать Slack бота. Название пишите произвольное. Токен бота нужно получить на сайте Slack.

Канал бота необходимо писать через решетку. Например, `#general`,  
затем выберите номер задачи к которой будет прикреплен бот. Если выбираете задачу №2, то необходимо написать теги для фильтрации парсинга страниц.

У каждой задачи есть несколько режимов работы. Если выбрать режим отправки сообщения сразу после появления поста, то остальные поля формы можно оставить как есть. Для других задач имеются дополнительные поля. Например если выбрали режим отправки раз в неделю, то нужно выбрать день отправки в неделю от 1 до 7.  
Кнопка "остановить" останавливает последнюю запущенную задачу. Оранжевая кнопка останавливает все задачи.

Также в любой момент можете отредактировать ранее созданных Slack ботов либо удалить их. Например, если по каким-то причинам у вас был забанен текущий бот, то в списке ботов необходимо выбрать этот бот, и присвоить ему новый токен.


# Установка

1. Установить в систему Redis:  
   ```
   sudo apt-get update
   sudo apt-get install redis
   redis-server
   ```

2. Установить необходимые пакеты:  
   ```
   pip3 install -r requirements.txt
   ```

3. Запустить сервер:  
   ```
   python3 manage.py runserver
   ```

4. Запустите Celery:  
   ```
   celery -A slackbot worker -l INFO
   ```
