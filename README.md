# SLACKBOT 
![picture](https://miro.medium.com/max/4000/1*AB7mUaMbKwZjThYXVIuenQ.jpeg)

Внимательно прочтите инструкцию перед развертыванием приложения!

Приложение для работы использует библиотеки Celery и Redis, эти пакеты не корректно работают на Windows, поэтому рекомендуется сервер на Linux. 

1. Установите в систему Redis:\
$ sudo apt-get update\
$ sudo apt-get install redis\
затем запустите его:\
$ redis-server

2. Создайте виртуальное окружение и установите необходимые пакеты для работы приложения:\
pip3 install -r requirements.txt\
Дождитесь окончания установки всех зависимостей.

3. Из корня проекта запустите сервер. Корнем считается тот каталог, где находиться файл manage.py:
* python3 manage.py runserver

4. Из корня проекта запустите Celery:
* celery -A slackbot worker -l INFO

5. Откройте браузер и перейдите на адрес:
* http://127.0.0.1:8000/

На этом приложение установлено и запущено. 

## Краткое описание! 
Приложение парсит сайт на появление новых постов и сохраняет в базе данных. Далее согласно заданным настройкам делает рассылку на каналы программы slack.


Для запуска задач нужно создать slack ботов. Slack ботов можно создавать сколько угодно. Каждый slack бот будет прикреплен к определенной задаче и отправлять сообщение в выбранный канал в соответствии с выбранными настройками.
Чтобы создать бота нажмите создать slack бота. Название пишите произвольное. Токен бота нужно получить на сайте слака.

Канал бота необходимо писать через решетку. Например, #general,
затем выберите номер задачи к которой будет прикреплен бот. Если выбираете задачу №2, то необходимо написать теги для фильтрации парсинга страниц.

У каждой задачи есть несколько режимов работы. Если выбрать режим отправки сообщения сразу после появления поста, то остальные поля формы можно оставить как есть. Для других задач имеются дополнительные поля. Например если выбрали режим отправки раз в неделю, то нужно выбрать день отправки в неделю от 1 до 7.
Кнопка остановить останавливает последнюю запущенную задачу. Оранжевая кнопка останавливает все задачи.

Также в любой момент можете отредактировать ранее созданных slack ботов либо удалить их. Например, если по каким то причинам у вас был забанен текущий бот, то в списке ботов необходимо выбрать этот бот, и присвоить ему новый токен